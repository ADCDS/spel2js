function Stack(a){this.elements=a||[]}Stack.prototype.push=function(a){return this.elements.push(a),a},Stack.prototype.pop=function(){return this.elements.pop()},Stack.prototype.peek=function(){return this.elements[this.elements.length-1]},Stack.prototype.empty=function(){return this.elements.length>0},Stack.prototype.search=function(a){return this.elements.length-this.elements.indexOf(a)},function(a){"use strict";function b(a){this.type=a,this.tokenChars=c[a],this._hasPayload="string"!=typeof c[a],"number"==typeof c[a]&&(this._ordinal=c[a])}var c={LITERAL_INT:1,LITERAL_LONG:2,LITERAL_HEXINT:3,LITERAL_HEXLONG:4,LITERAL_STRING:5,LITERAL_REAL:6,LITERAL_REAL_FLOAT:7,LPAREN:"(",RPAREN:")",COMMA:",",IDENTIFIER:0,COLON:":",HASH:"#",RSQUARE:"]",LSQUARE:"[",LCURLY:"{",RCURLY:"}",DOT:".",PLUS:"+",STAR:"*",MINUS:"-",SELECT_FIRST:"^[",SELECT_LAST:"$[",QMARK:"?",PROJECT:"![",DIV:"/",GE:">=",GT:">",LE:"<=",LT:"<",EQ:"==",NE:"!=",MOD:"%",NOT:"!",ASSIGN:"=",INSTANCEOF:"instanceof",MATCHES:"matches",BETWEEN:"between",SELECT:"?[",POWER:"^",ELVIS:"?:",SAFE_NAVI:"?.",BEAN_REF:"@",SYMBOLIC_OR:"||",SYMBOLIC_AND:"&&",INC:"++",DEC:"--"};for(var d in c)c.hasOwnProperty(d)&&(b[d]=new b(d));b.prototype.toString=function(){return this.type+(0!=this.tokenChars.length?"("+this.tokenChars+")":"")},b.prototype.getLength=function(){return this.tokenChars.length},b.prototype.hasPayload=function(){return this._hasPayload},b.prototype.valueOf=function(a){for(var d in c)if(c.hasOwnProperty(d)&&c[d]===a)return b[d]},b.prototype.ordinal=function(){return this._ordinal},a.TokenKind=b}(window||exports),function(a){"use strict";function b(a,b,c,d){this.kind=a,this.startPos=c,this.endPos=d,b&&(this.data=b)}var c;try{c=require("./TokenKind").TokenKind}catch(d){c=a.TokenKind}b.prototype.getKind=function(){return this.kind},b.prototype.toString=function(){var a="[";return a+=this.kind.toString(),this.kind.hasPayload()&&(a+=":"+this.data),a+="]",a+="("+this.startPos+","+this.endPos+")"},b.prototype.isIdentifier=function(){return this.kind==c.IDENTIFIER},b.prototype.isNumericRelationalOperator=function(){return this.kind==c.GT||this.kind==c.GE||this.kind==c.LT||this.kind==c.LE||this.kind==c.EQ||this.kind==c.NE},b.prototype.stringValue=function(){return this.data},b.prototype.asInstanceOfToken=function(){return new b(c.INSTANCEOF,this.startPos,this.endPos)},b.prototype.asMatchesToken=function(){return new b(c.MATCHES,this.startPos,this.endPos)},b.prototype.asBetweenToken=function(){return new b(c.BETWEEN,this.startPos,this.endPos)},b.prototype.getStartPosition=function(){return this.startPos},b.prototype.getEndPosition=function(){return this.endPos},a.Token=b}(window||exports),function(a){"use strict";function b(){var a;for(a="0".charCodeAt(0);a<="9".charCodeAt(0);a+=1)g[a]|=h|i;for(a="A".charCodeAt(0);a<="F".charCodeAt(0);a+=1)g[a]|=i;for(a="a".charCodeAt(0);a<="f".charCodeAt(0);a+=1)g[a]|=i;for(a="A".charCodeAt(0);a<="Z".charCodeAt(0);a+=1)g[a]|=j;for(a="a".charCodeAt(0);a<="z".charCodeAt(0);a+=1)g[a]|=j}function c(a){function b(){for(var a;G>H;)if(a=F[H],C(a))m();else switch(a){case"+":r(e.INC)?t(e.INC):s(e.PLUS);break;case"_":m();break;case"-":r(e.DEC)?t(e.DEC):s(e.MINUS);break;case":":s(e.COLON);break;case".":s(e.DOT);break;case",":s(e.COMMA);break;case"*":s(e.STAR);break;case"/":s(e.DIV);break;case"%":s(e.MOD);break;case"(":s(e.LPAREN);break;case")":s(e.RPAREN);break;case"[":s(e.LSQUARE);break;case"#":s(e.HASH);break;case"]":s(e.RSQUARE);break;case"{":s(e.LCURLY);break;case"}":s(e.RCURLY);break;case"@":s(e.BEAN_REF);break;case"^":r(e.SELECT_FIRST)?t(e.SELECT_FIRST):s(e.POWER);break;case"!":r(e.NE)?t(e.NE):r(e.PROJECT)?t(e.PROJECT):s(e.NOT);break;case"=":r(e.EQ)?t(e.EQ):s(e.ASSIGN);break;case"&":if(!r(e.SYMBOLIC_AND))throw{name:"SpelParseException",message:"Missing character '&' in expression ("+E+") at position "+H};t(e.SYMBOLIC_AND);break;case"|":if(!r(e.SYMBOLIC_OR))throw{name:"SpelParseException",message:"Missing character '|' in expression ("+E+") at position "+H};t(e.SYMBOLIC_OR);break;case"?":r(e.SELECT)?t(e.SELECT):r(e.ELVIS)?t(e.ELVIS):r(e.SAFE_NAVI)?t(e.SAFE_NAVI):s(e.QMARK);break;case"$":r(e.SELECT_LAST)?t(e.SELECT_LAST):m();break;case">":r(e.GE)?t(e.GE):s(e.GT);break;case"<":r(e.LE)?t(e.LE):s(e.LT);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":l("0"===a);break;case" ":case"	":case"\r":case"\n":H+=1;break;case"'":c();break;case'"':k();break;case"\x00":H+=1;break;case"\\":throw{name:"SpelParseException",message:"Unexpected escape character in expression ("+E+") at position "+H};default:throw{name:"SpelParseException",message:"Cannot handle character '"+a+"' in expression ("+E+") at position "+H}}}function c(){for(var a,b=H,c=!1;!c;)if(H+=1,a=F[H],"'"==a&&("'"==F[H+1]?H+=1:c=!0),0===a.charCodeAt(0))throw{name:"SpelParseException",message:"Non-terminating quoted string in expression ("+E+") at position "+H};H+=1,I.push(new d(e.LITERAL_STRING,q(b,H),b,H))}function k(){for(var a,b=H,c=!1;!c;)if(H+=1,a=F[H],'"'==a&&('"'==F[H+1]?H+=1:c=!0),0===a.charCodeAt(0))throw{name:"SpelParseException",message:"Non-terminating double-quoted string in expression ("+E+") at position "+H};H+=1,I.push(new d(e.LITERAL_STRING,q(b,H),b,H))}function l(a){var b,c,d,e,f=!1,g=H,h=F[H+1],i="x"==h||"X"==h;if(a&&i){H+=1;do H+=1;while(D(F[H]));return void(w("L","l")?(o(q(g+2,H),!0,g,H),H+=1):o(q(g+2,H),!1,g,H))}do H+=1;while(B(F[H]));if(h=F[H],"."==h){f=!0,b=H;do H+=1;while(B(F[H]));if(H===b+1)return H=b,void n(q(g,H),!1,g,H)}if(c=H,w("L","l")){if(f)throw{name:"SpelParseException",message:"Real cannot be long in expression ("+E+") at position "+H};n(q(g,c),!0,g,c),H+=1}else if(x(F[H])){f=!0,H+=1,d=F[H],A(d)&&(H+=1);do H+=1;while(B(F[H]));e=!1,y(F[H])?(e=!0,H+=1,c=H):z(F[H])&&(H+=1,c=H),p(q(g,H),e,g,H)}else h=F[H],e=!1,y(h)?(f=!0,e=!0,H+=1,c=H):z(h)&&(f=!0,H+=1,c=H),f?p(q(g,c),e,g,c):n(q(g,c),!1,g,c)}function m(){var a,b,c,g=H;do H+=1;while(v(F[H]));return a=q(g,H),(H-g===2||H-g===3)&&(b=a.toUpperCase(),c=f.indexOf(b),c>=0)?void u(e.valueOf(b),g,a):void I.push(new d(e.IDENTIFIER,a.replace("\x00",""),g,H))}function n(a,b,c,f){b?I.push(new d(e.LITERAL_LONG,a,c,f)):I.push(new d(e.LITERAL_INT,a,c,f))}function o(a,b,c,f){if(0===a.length)throw b?{name:"SpelParseException",message:"Not a long in expression ("+E+") at position "+H}:{name:"SpelParseException",message:"Not an int in expression ("+E+") at position "+H};b?I.push(new d(e.LITERAL_HEXLONG,a,c,f)):I.push(new d(e.LITERAL_HEXINT,a,c,f))}function p(a,b,c,f){b?I.push(new d(e.LITERAL_REAL_FLOAT,a,c,f)):I.push(new d(e.LITERAL_REAL,a,c,f))}function q(a,b){return F.substring(a,b)}function r(a){return 2===a.tokenChars.length&&F[H]==a.tokenChars[0]?F[H+1]===a.tokenChars[1]:!1}function s(a){I.push(new d(a,null,H,H+1)),H+=1}function t(a){I.push(new d(a,null,H,H+2)),H+=2}function u(a,b,c){I.push(new d(a,c,b,b+a.getLength()))}function v(a){return C(a)||B(a)||"_"===a||"$"===a}function w(a,b){var c=F[H];return c===a||c===b}function x(a){return"e"===a||"E"===a}function y(a){return"f"===a||"F"===a}function z(a){return"d"===a||"D"===a}function A(a){return"+"===a||"-"===a}function B(a){return a.charCodeAt(0)>255?!1:0!==(g[a.charCodeAt(0)]&h)}function C(a){return a.charCodeAt(0)>255?!1:0!==(g[a.charCodeAt(0)]&j)}function D(a){return a.charCodeAt(0)>255?!1:0!==(g[a.charCodeAt(0)]&i)}var E=a,F=a+"\x00",G=F.length,H=0,I=[];return b(),I}var d,e,f=["DIV","EQ","GE","GT","LE","LT","MOD","NE","NOT"],g=[],h=1,i=2,j=4;try{d=require("./Token").Token,e=require("./TokenKind").TokenKind}catch(k){d=a.Token,e=a.TokenKind}b(),a.Tokenizer={tokenize:c}}(window||exports),function(a){"use strict";function b(a,b){var c,d={},e=a||"Abstract",f=[],g=null,h=Array.prototype.slice.call(arguments),i=h.length>2?h.slice(2):null;if(d._type=e,d.getType=function(){return e},d.setType=function(a){e=a},d.getChildren=function(){return f},d.addChild=function(a){a.setParent(d),f.push(a)},d.getParent=function(){return g},d.setParent=function(a){g=a},d.getContext=function(a){return c||a.activeContext.peek()},d.setContext=function(a){c=a},d.getStartPosition=function(){return b>>16},d.getEndPosition=function(){return 65535&b},d.getValue=function(){throw{name:"MethodNotImplementedException",message:"SpelNode#getValue() must be overridden."}},d.toString=function(){var a="Kind: "+d.getType();a+=", Children: [";for(var b=0,c=d.getChildren().length;c>b;b+=1)a+="{"+d.getChildren()[b]+"}, ";return a+="]"},0===b)throw{name:"Error",message:"Position cannot be 0"};return i&&i.forEach(function(a){d.addChild(a)}),d}a.SpelNode={create:b}}(window||exports),function(a,b){"use strict";function c(a,b,c){var e=d.create("assign",a,b,c);return e.getValue=function(a){var d=a.activeContext.peek();if(!d)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+b.getValue(a)+"' for an undefined context."};return b.setValue(c.getValue(a),a)},e}var d;try{d=require("./SpelNode").SpelNode}catch(e){d=a.SpelNode}a.Assign={create:c}}(window||exports),function(a){"use strict";function b(a,b){var d=c.create("boolean",b);return d.getValue=function(){return a},d.setValue=function(b){a=b},d}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.BooleanLiteral={create:b}}(window||exports),function(a){"use strict";function b(a,b){function d(a){var b,c=e.getChildren().length;for(b=0;c>b;b+=1)"indexer"===e.getChildren()[b].getType()?a.activeContext.push(a.activeContext.peek()[e.getChildren()[b].getValue(a)]):a.activeContext.push(e.getChildren()[b].getValue(a));return function(){for(b=0;c>b;b+=1)a.activeContext.pop()}}var e=c.create.apply(null,["compound",a].concat(b));return e.getValue=function(a){var b,c=a.activeContext.peek();if(!c)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};var e=d(a);return b=a.activeContext.peek(),e(),b},e.setValue=function(a,b){var c=d(b),f=e.getChildren().length;return b.activeContext.pop(),a=e.getChildren()[f-1].setValue(a,b),b.activeContext.push(null),c(),a},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.CompoundExpression={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("elvis",a,b,d);return e.getValue=function(a){return null!==b.getValue(a)?b.getValue(a):d.getValue(a)},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.Elvis={create:b}}(window||exports),function(a){"use strict";function b(a,b){var d=c.create("method",a);return d.getValue=function(){var a=d,c=null;do a.getParent()?a=a.getParent():c=a.getContext();while(a);if(c[b])return c[b].call(c);throw{name:"FunctionDoesNotExistException",message:"Function '"+b+"' does not exist."}},d}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.FunctionReference={create:b}}(window||exports),function(a){"use strict";function b(a,b){var d=c.create.apply(null,["indexer",a].concat(b));return d.getValue=function(a){var b,c,e,f=a.activeContext,g=d.getChildren().length;if(a.activeContext=new Stack,a.activeContext.push(a.rootContext),b=a.activeContext.peek(),!b)throw{name:"ContextDoesNotExistException",message:"Attempting to evaluate compound expression with an undefined context."};for(c=0;g>c;c+=1)a.activeContext.push(d.getChildren()[c].getValue(a));for(e=a.activeContext.peek(),c=0;g>c;c+=1)a.activeContext.pop();return a.activeContext=f,e},d}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.Indexer={create:b}}(window||exports),function(a){"use strict";function b(a,b){var d=c.create("list",a),e=[].concat(b||[]);return d.getValue=function(a){return e.map(function(b){return b.getValue(a)})},d}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.InlineList={create:b}}(window||exports),function(a){"use strict";function b(a,b){var d=c.create("map",a),e=[].concat(b||[]);return d.getValue=function(a){var b=!0,c=null,d={};return e.forEach(function(e){b?c="property"===e.getType()?e.getName():e.getValue(a):d[c]=e.getValue(a),b=!b}),d},d}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.InlineMap={create:b}}(window||exports),function(a,b){"use strict";function c(a,c,e,f){var g=d.create("method",e);return g.getValue=function(d){function e(d){if(d===b){if(a)return null;throw{name:"NullPointerException",message:"Method "+c+" does not exist."}}return d}var g,h=d.activeContext.peek(),i=[];if(!h)throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+c+"' for an undefined context."};return f.forEach(function(a){i.push(a.getValue(d))}),"get"!==c.substr(0,3)||h[c]?"set"!==c.substr(0,3)||h[c]?"size"===c&&Array.isArray(h)?h.length:(g=e(h[c]),g?g.apply(h,i):null):h[c.charAt(3).toLowerCase()+c.substring(4)]=i[0]:e(h[c.charAt(3).toLowerCase()+c.substring(4)])},g}var d;try{d=require("./SpelNode").SpelNode}catch(e){d=a.SpelNode}a.MethodReference={create:c}}(window||exports),function(a){"use strict";function b(a,b){var d=c.create("null",b);return d.getValue=function(){return null},d}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.NullLiteral={create:b}}(window||exports),function(a){"use strict";function b(a,b){var d=c.create("number",b);return d.getValue=function(){return a},d.setValue=function(b){a=b},d}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.NumberLiteral={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-and",a,b,d);return e.getValue=function(a){return!!b.getValue(a)&&!!d.getValue(a)},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpAnd={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-dec",a,d);return e.getValue=function(a){var c=d.getValue(a);return d.setValue(c-1,a),b?c:c-1},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpDec={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-divide",a,b,d);return e.getValue=function(a){return b.getValue(a)/d.getValue(a)},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpDivide={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-eq",a,b,d);return e.getValue=function(a){return b.getValue(a)===d.getValue(a)},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpEQ={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-ge",a,b,d);return e.getValue=function(a){return b.getValue(a)>=d.getValue(a)},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpGE={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-gt",a,b,d);return e.getValue=function(a){return b.getValue(a)>d.getValue(a)},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpGT={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-inc",a,d);return e.getValue=function(a){var c=d.getValue(a);return d.setValue(c+1,a),b?c:c+1},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpInc={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-le",a,b,d);return e.getValue=function(a){return b.getValue(a)<=d.getValue(a)},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpLE={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-lt",a,b,d);return e.getValue=function(a){return b.getValue(a)<d.getValue(a)},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpLT={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-minus",a,b,d);return e.getValue=function(a){return b.getValue(a)-d.getValue(a)},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpMinus={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-modulus",a,b,d);return e.getValue=function(a){return b.getValue(a)%d.getValue(a)},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpModulus={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-multiply",a,b,d);return e.getValue=function(a){var c=b.getValue(a),e=d.getValue(a);if("number"==typeof c&&"number"==typeof e)return c*e;if("string"==typeof c&&"number"==typeof e){for(var f="",g=0;e>g;g+=1)f+=c;return f}return null},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpMultiply={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-ne",a,b,d);return e.getValue=function(a){return b.getValue(a)!==d.getValue(a)},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpNE={create:b}}(window||exports),function(a){"use strict";function b(a,b){var d=c.create("op-not",a,b);return d.getValue=function(a){return!b.getValue(a)},d}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpNot={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-or",a,b,d);return e.getValue=function(a){return!!b.getValue(a)||!!d.getValue(a)},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpOr={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-plus",a,b,d);return e.getValue=function(a){return b.getValue(a)+d.getValue(a)},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpPlus={create:b}}(window||exports),function(a){"use strict";function b(a,b,d){var e=c.create("op-power",a,b,d);return e.getValue=function(a){return Math.pow(b.getValue(a),d.getValue(a))},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.OpPower={create:b}}(window||exports),function(a){"use strict";function b(a,b,c){return a.map(function(a){var d;return c.activeContext.push(a),d=b.getValue(c),c.activeContext.pop(),d})}function c(a,c,e){var f=d.create("projection",c,e);return f.getValue=function(a){var c,d=a.activeContext.peek(),f=[];if(Array.isArray(d))return b(d,e,a);if("object"==typeof d){for(c in d)d.hasOwnProperty(c)&&f.push(d[c]);return b(f,e,a)}return null},f}var d;try{d=require("./SpelNode").SpelNode}catch(e){d=a.SpelNode}a.Projection={create:c}}(window||exports),function(a,b){"use strict";function c(a,c,e){var f=d.create("property",e);return f.getValue=function(d){var e=d.activeContext.peek();if(!e)throw{name:"ContextDoesNotExistException",message:"Attempting to look up property '"+c+"' for an undefined context."};if(e[c]===b){if(a)return null;if("size"===c&&Array.isArray(e))return e.length;throw{name:"NullPointerException",message:"Property '"+c+"' does not exist."}}return e[c]},f.setValue=function(a,b){var d=b.activeContext.peek();if(!d)throw{name:"ContextDoesNotExistException",message:"Attempting to assign property '"+c+"' for an undefined context."};return d[c]=a},f.getName=function(){return c},f}var d;try{d=require("./SpelNode").SpelNode}catch(e){d=a.SpelNode}a.PropertyReference={create:c}}(window||exports),function(a){"use strict";function b(a){var b=c.create("root",null,a);return b.getValue=function(){return b.getChildren()[0]?b.getChildren()[0].getValue():null},b}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.RootNode={create:b}}(window||exports),function(a){"use strict";function b(a,b,c){var d=!1;return c.activeContext.push(a),d=b.getValue(c),c.activeContext.pop(),d}function c(a,c,d,e){var f=a.filter(function(a){return b(a,d,e)});switch(c){case"ALL":return f;case"FIRST":return f[0]||null;case"LAST":return f.length?f[f.length-1]:null}}function d(a,c,d,e){var f,g,h={},i=[],j={};for(g in a)a.hasOwnProperty(g)&&(f={key:g,value:a[g]},b(f,d,e)&&i.push(f));switch(c){case"ALL":return i.forEach(function(a){h[a.key]=a.value}),h;case"FIRST":return i.length?(j[i[0].key]=i[0].value,j):null;case"LAST":return i.length?(j[i[i.length-1].key]=i[i.length-1].value,j):null}i.forEach(function(a){h[a.key]=a.value})}function e(a,b,e,g){var h=f.create("selection",e,g);return h.getValue=function(a){var e=a.activeContext.peek();if(e){if(Array.isArray(e))return c(e,b,g,a);if("object"==typeof e)return d(e,b,g,a)}return null},h}var f;try{f=require("./SpelNode").SpelNode}catch(g){f=a.SpelNode}a.Selection={create:e,FIRST:"FIRST",LAST:"LAST",ALL:"ALL"}}(window||exports),function(a){"use strict";function b(a,b){function d(a){return"'"===a[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1]?a.substring(1,a.length-1):a}var e=c.create("string",b);return a=d(a),e.getValue=function(){return a},e.setValue=function(b){a=b},e}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.StringLiteral={create:b}}(window||exports),function(a){"use strict";function b(a,b,d,e){var f=c.create("ternary",a,b,d,e);return f.getValue=function(a){return b.getValue(a)?d.getValue(a):e.getValue(a)},f}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.Ternary={create:b}}(window||exports),function(a){"use strict";function b(a,b){var d=c.create("variable",b);return d.getValue=function(b){var c=b.activeContext.peek(),d=b.locals;if(!c)throw{name:"ContextDoesNotExistException",message:"Attempting to look up variable '"+a+"' for an undefined context."};return"this"===a?c:"root"===a?b.rootContext:d[a]},d.setValue=function(b,c){var d=c.locals;return d[a]=b},d}var c;try{c=require("./SpelNode").SpelNode}catch(d){c=a.SpelNode}a.VariableReference={create:b}}(window||exports),function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;try{b=require("./TokenKind"),c=require("./Tokenizer"),d=require("./ast/RootNode"),e=require("./ast/BooleanLiteral"),f=require("./ast/NumberLiteral"),g=require("./ast/StringLiteral"),h=require("./ast/NullLiteral"),i=require("./ast/FunctionReference"),j=require("./ast/MethodReference"),k=require("./ast/PropertyReference"),l=require("./ast/VariableReference"),m=require("./ast/CompoundExpression"),n=require("./ast/Indexer"),o=require("./ast/Assign"),p=require("./ast/OpEQ"),q=require("./ast/OpNE"),r=require("./ast/OpGE"),s=require("./ast/OpGT"),t=require("./ast/OpLE"),u=require("./ast/OpLT"),v=require("./ast/OpPlus"),w=require("./ast/OpMinus"),x=require("./ast/OpMultiply"),y=require("./ast/OpDivide"),z=require("./ast/OpModulus"),A=require("./ast/OpPower"),B=require("./ast/OpInc"),C=require("./ast/OpDec"),D=require("./ast/OpNot"),E=require("./ast/OpAnd"),F=require("./ast/OpOr"),G=require("./ast/Ternary"),H=require("./ast/Elvis"),I=require("./ast/InlineList"),J=require("./ast/InlineMap"),K=require("./ast/Selection"),L=require("./ast/Projection")}catch(M){b=a.TokenKind,c=a.Tokenizer,d=a.RootNode,e=a.BooleanLiteral,f=a.NumberLiteral,g=a.StringLiteral,h=a.NullLiteral,i=a.FunctionReference,j=a.MethodReference,k=a.PropertyReference,l=a.VariableReference,m=a.CompoundExpression,n=a.Indexer,o=a.Assign,p=a.OpEQ,q=a.OpNE,r=a.OpGE,s=a.OpGT,t=a.OpLE,u=a.OpLT,v=a.OpPlus,w=a.OpMinus,x=a.OpMultiply,y=a.OpDivide,z=a.OpModulus,A=a.OpPower,B=a.OpInc,C=a.OpDec,D=a.OpNot,E=a.OpAnd,F=a.OpOr,G=a.Ternary,H=a.Elvis,I=a.InlineList,J=a.InlineMap,K=a.Selection,L=a.Projection}var N=function(){function a(a){Ha=a}function d(a,b){try{Ia=a,Ja=c.tokenize(a),Ka=Ja.length,La=0,Na=[];var d=M();return xa()&&Aa(za().startPos,"MORE_INPUT",ya().toString()),d}catch(e){throw e.message}}function M(){var a=N();if(xa()){var c=za();if(c.getKind()==b.ASSIGN){null==a&&(a=h.create(Ga(c.startPos-1,c.endPos-1))),ya();var d=N();return o.create(Fa(c),a,d)}if(c.getKind()==b.ELVIS){null==a&&(a=h.create(Ga(c.startPos-1,c.endPos-2))),ya();var e=M();return null==e&&(e=h.create(Ga(c.startPos+1,c.endPos+1))),H.create(Fa(c),a,e)}if(c.getKind()==b.QMARK){null==a&&(a=h.create(Ga(c.startPos-1,c.endPos-1))),ya();var f=M();ra(b.COLON);var g=M();return G.create(Fa(c),a,f,g)}}return a}function N(){for(var a=O();va("or")||sa(b.SYMBOLIC_OR);){var c=ya(),d=O();Ca(c,a,d),a=F.create(Fa(c),a,d)}return a}function O(){for(var a=P();va("and")||sa(b.SYMBOLIC_AND);){var c=ya(),d=P();Ca(c,a,d),a=E.create(Fa(c),a,d)}return a}function P(){var a=Q(),c=qa();if(null!=c){var d=ya(),e=Q();Ca(d,a,e);var f=c.kind;if(c.isNumericRelationalOperator()){var g=Fa(d);return f==b.GT?s.create(g,a,e):f==b.LT?u.create(g,a,e):f==b.LE?t.create(g,a,e):f==b.GE?r.create(g,a,e):f==b.EQ?p.create(g,a,e):q.create(g,a,e)}return f==b.INSTANCEOF?new OperatorInstanceof(Fa(d),a,e):f==b.MATCHES?new OperatorMatches(Fa(d),a,e):new OperatorBetween(Fa(d),a,e)}return a}function Q(){for(var a=R();ua(b.PLUS,b.MINUS,b.INC);){var c=ya(),d=R();Ea(c,d),c.getKind()==b.PLUS?a=v.create(Fa(c),a,d):c.getKind()==b.MINUS&&(a=w.create(Fa(c),a,d))}return a}function R(){for(var a=S();ua(b.STAR,b.DIV,b.MOD);){var c=ya(),d=S();Ca(c,a,d),a=c.getKind()==b.STAR?x.create(Fa(c),a,d):c.getKind()==b.DIV?y.create(Fa(c),a,d):z.create(Fa(c),a,d)}return a}function S(){var a,c=T();if(sa(b.POWER)){a=ya();var d=T();return Ea(a,d),A.create(Fa(a),c,d)}return null!=c&&ua(b.INC,b.DEC)?(a=ya(),a.getKind()==b.INC?B.create(Fa(a),!0,c):C.create(Fa(a),!0,c)):c}function T(){var a,c;return ua(b.PLUS,b.MINUS,b.NOT)?(a=ya(),c=T(),a.getKind()==b.NOT?D.create(Fa(a),c):a.getKind()==b.PLUS?v.create(Fa(a),c):w.create(Fa(a),c)):ua(b.INC,b.DEC)?(a=ya(),c=T(),a.getKind()==b.INC?B.create(Fa(a),!1,c):C.create(Fa(a),!1,c)):U()}function U(){var a=[],b=aa();for(a.push(b);V();)a.push(na());return 1==a.length?a[0]:m.create(Ga(b.getStartPosition(),a[a.length-1].getEndPosition()),a)}function V(){var a=null;return a=ua(b.DOT,b.SAFE_NAVI)?X():W(),null==a?!1:(ma(a),!0)}function W(){return sa(b.LSQUARE)&&ga()?na():null}function X(){var a=ya(),c=a.getKind()==b.SAFE_NAVI;return ka(c)||Y()||ea(c)||ha(c)?na():(null==za()?Aa(a.startPos,"OOD"):Aa(a.startPos,"UNEXPECTED_DATA_AFTER_DOT",Ba(za())),null)}function Y(){if(!sa(b.HASH))return!1;var a=ya(),c=ra(b.IDENTIFIER),d=Z();return null==d?(ma(l.create(c.data,Ga(a.startPos,c.endPos))),!0):(ma(i.create(c.data,Ga(a.startPos,c.endPos),d)),!0)}function Z(){if(!sa(b.LPAREN))return null;var a=[];return _(a),ra(b.RPAREN),a}function $(a){sa(b.LPAREN)||Aa(Fa(za()),"MISSING_CONSTRUCTOR_ARGS"),_(a),ra(b.RPAREN)}function _(a){var c,d=za().startPos;do{ya();var e=za();null==e&&Aa(d,"RUN_OUT_OF_ARGUMENTS"),e.getKind()!=b.RPAREN&&a.push(M()),c=za()}while(null!=c&&c.kind==b.COMMA);null==c&&Aa(d,"RUN_OUT_OF_ARGUMENTS")}function aa(){return oa()?na():pa()?na():ca()||da()||la()||ka(!1)||Y()?na():ba()?na():ea(!1)||ha(!1)||ga()?na():fa()?na():null}function ba(){if(sa(b.BEAN_REF)){var a=ya(),c=null,d=null;sa(b.IDENTIFIER)?(c=ra(b.IDENTIFIER),d=c.data):sa(b.LITERAL_STRING)?(c=ra(b.LITERAL_STRING),d=c.stringValue(),d=d.substring(1,d.length()-1)):Aa(a.startPos,"INVALID_BEAN_REFERENCE");var e=new BeanReference(Fa(c),d);return ma(e),!0}return!1}function ca(){if(sa(b.IDENTIFIER)){var a=za();if("T"!==a.stringValue())return!1;var c=ya();if(sa(b.RSQUARE))return ma(k.create(c.stringValue(),Fa(c))),!0;ra(b.LPAREN);for(var d=ia(),e=0;ta(b.LSQUARE,!0);)ra(b.RSQUARE),e++;return ra(b.RPAREN),ma(new TypeReference(Fa(a),d,e)),!0}return!1}function da(){if(sa(b.IDENTIFIER)){var a=za();return"null"!==a.stringValue().toLowerCase()?!1:(ya(),ma(h.create(Fa(a))),!0)}return!1}function ea(a){var c=za();if(!ta(b.PROJECT,!0))return!1;var d=M();return ra(b.RSQUARE),ma(L.create(a,Fa(c),d)),!0}function fa(){var a=za(),c=[];if(!ta(b.LCURLY,!0))return!1;var d=null,e=za();if(ta(b.RCURLY,!0))d=I.create(Ga(a.startPos,e.endPos));else if(ta(b.COLON,!0))e=ra(b.RCURLY),d=J.create(Ga(a.startPos,e.endPos));else{var f=M();if(sa(b.RCURLY))c.push(f),e=ra(b.RCURLY),d=I.create(Ga(a.startPos,e.endPos),c);else if(ta(b.COMMA,!0)){c.push(f);do c.push(M());while(ta(b.COMMA,!0));e=ra(b.RCURLY),d=I.create(Fa(a.startPos,e.endPos),c)}else if(ta(b.COLON,!0)){var g=[];for(g.push(f),g.push(M());ta(b.COMMA,!0);)g.push(M()),ra(b.COLON),g.push(M());e=ra(b.RCURLY),d=J.create(Ga(a.startPos,e.endPos),g)}else Aa(a.startPos,"OOD")}return ma(d),!0}function ga(){var a=za();if(!ta(b.LSQUARE,!0))return!1;var c=M();return ra(b.RSQUARE),ma(n.create(Fa(a),c)),!0}function ha(a){var c=za();if(!wa())return!1;ya();var d=M();return null==d&&Aa(Fa(c),"MISSING_SELECTION_EXPRESSION"),ra(b.RSQUARE),ma(c.getKind()==b.SELECT_FIRST?K.create(a,K.FIRST,Fa(c),d):c.getKind()==b.SELECT_LAST?K.create(a,K.LAST,Fa(c),d):K.create(a,K.ALL,Fa(c),d)),!0}function ia(){for(var a=[],c=za();ja(c);)ya(),c.kind!=b.DOT&&a.push(new Identifier(c.stringValue(),Fa(c))),c=za();a.length||(null==c&&Aa(Ia.length(),"OOD"),Aa(c.startPos,"NOT_EXPECTED_TOKEN","qualified ID",c.getKind().toString().toLowerCase()));var d=Ga(a[0].getStartPosition(),a[a.length-1].getEndPosition());return new QualifiedIdentifier(d,a)}function ja(a){if(null==a||a.kind==b.LITERAL_STRING)return!1;if(a.kind==b.DOT||a.kind==b.IDENTIFIER)return!0;var c=a.stringValue();return c.length&&Ma.test(c)}function ka(a){if(sa(b.IDENTIFIER)){var c=ya(),d=Z();return null==d?(ma(k.create(a,c.stringValue(),Fa(c))),!0):(ma(j.create(a,c.stringValue(),Fa(c),d)),!0)}return!1}function la(){if(va("new")){var a=ya();if(sa(b.RSQUARE))return ma(k.create(a.stringValue(),Fa(a))),!0;var c=ia(),d=[];if(d.push(c),sa(b.LSQUARE)){for(var e=[];ta(b.LSQUARE,!0);)sa(b.RSQUARE)?e.push(null):e.push(M()),ra(b.RSQUARE);fa()&&d.push(na()),ma(new ConstructorReference(Fa(a),e,d))}else $(d),ma(new ConstructorReference(Fa(a),d));return!0}return!1}function ma(a){Na.push(a)}function na(){return Na.pop()}function oa(){var a=za();if(null==a)return!1;if(a.getKind()===b.LITERAL_INT||a.getKind()===b.LITERAL_LONG)ma(f.create(parseInt(a.stringValue(),10),Fa(a)));else if(a.getKind()===b.LITERAL_REAL||a.getKind()===b.LITERAL_REAL_FLOAT)ma(f.create(parseFloat(a.stringValue()),Fa(a)));else if(a.getKind()===b.LITERAL_HEXINT||a.getKind()===b.LITERAL_HEXLONG)ma(f.create(parseInt(a.stringValue(),16),Fa(a)));else if(va("true"))ma(e.create(!0,Fa(a)));else if(va("false"))ma(e.create(!1,Fa(a)));else{if(a.getKind()!==b.LITERAL_STRING)return!1;ma(g.create(a.stringValue(),Fa(a)))}return ya(),!0}function pa(){if(sa(b.LPAREN)){ya();var a=M();return ra(b.RPAREN),ma(a),!0}return!1}function qa(){var a=za();if(null==a)return null;if(a.isNumericRelationalOperator())return a;if(a.isIdentifier()){var b=a.stringValue();if("instanceof"===b.toLowerCase())return a.asInstanceOfToken();if("matches"===b.toLowerCase())return a.asMatchesToken();if("between"===b.toLowerCase())return a.asBetweenToken()}return null}function ra(a){var b=ya();return null==b&&Aa(Ia.length,"OOD"),b.getKind()!=a&&Aa(b.startPos,"NOT_EXPECTED_TOKEN",a.toString().toLowerCase(),b.getKind().toString().toLowerCase()),b}function sa(a){return ta(a,!1)}function ta(a,c){if(!xa())return!1;var d=za();return d.getKind()==a?(c&&La++,!0):a==b.IDENTIFIER&&d.getKind().ordinal()>=b.DIV.ordinal()&&d.getKind().ordinal()<=b.NOT.ordinal()&&null!=d.data?!0:!1}function ua(){if(!xa())return!1;for(var a=za(),b=Array.prototype.slice.call(arguments),c=0,d=b.length;d>c;c+=1)if(a.getKind()===b[c])return!0;return!1}function va(a){if(!xa())return!1;var c=za();return c.getKind()===b.IDENTIFIER&&c.stringValue().toLowerCase()===a.toLowerCase()}function wa(){if(!xa())return!1;var a=za();return a.getKind()===b.SELECT||a.getKind()===b.SELECT_FIRST||a.getKind()===b.SELECT_LAST}function xa(){return La<Ja.length}function ya(){return La>=Ka?null:Ja[La++]}function za(){return La>=Ka?null:Ja[La]}function Aa(a,b,c,d){throw c&&(b+="\nExpected: "+c),d&&(b+="\nActual: "+d),{name:"InternalParseException",message:"Error occurred while attempting to parse expression '"+Ia+"' at position "+a+". Message: "+b}}function Ba(a){return a.getKind().hasPayload()?a.stringValue():a.getKind().toString().toLowerCase()}function Ca(a,b,c){Da(a,b),Ea(a,c)}function Da(a,b){null==b&&Aa(a.startPos,"LEFT_OPERAND_PROBLEM")}function Ea(a,b){null==b&&Aa(a.startPos,"RIGHT_OPERAND_PROBLEM")}function Fa(a){return(a.startPos<<16)+a.endPos}function Ga(a,b){return(a<<16)+b}var Ha,Ia,Ja,Ka,La,Ma=new RegExp("[\\p{L}\\p{N}_$]+"),Na=[];return{setConfiguration:a,parse:d}};a.SpelExpressionParser=N}(window||exports),function(a){"use strict";function b(a,b,c){var d,e=new Stack;return b||(b={}),e.push(b),d={rootContext:b,activeContext:e,locals:c},a.getValue(d)}var c,d={};
try{c=require("./SpelExpressionParser").SpelExpressionParser}catch(e){c=a.SpelExpressionParser}d.compile=function(a){var d=c().parse(a);return{eval:function(a,c){return b(d,a,c)},_compiledExpression:d}},d.eval=function(a,b,c){return d.compile(a).eval(b,c)},a.SpelExpressionEvaluator=d}(window||exports),function(a){"use strict";function b(a,b){var c={};return c.authentication=a||{},c.principal=b||{},c.hasRole=function(a){var b=!1;return a&&(c.authentication||Array.isArray(c.authentication.authorities))?(c.authentication.authorities.forEach(function(c){c.authority.toLowerCase()===a.toLowerCase()&&(b=!0)}),b):!1},c.hasPermission=function(){var a=Array.prototype.slice.call(arguments);return 1===a.length?c.hasRole(a[0]):void 0},c}a.StandardContext={create:b}}(window||exports);